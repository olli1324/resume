<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real Time Programming Exam Quiz</title>
    <link rel="stylesheet" href="styles/main.css">
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-LHBTV86VV1"></script>
    <script src="./analytics.js"></script>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìö Real Time Programming Quizzes</h1>
            <p>Prone yourself and get that A to make Sverre happy!</p>
        </div>

        <div class="topics-grid">
            <a href="code-quality/" class="topic-card" data-topic="code-quality">
                <h2>üìã Code Quality</h2>
                <p class="topic-description">Test your understanding of code quality principles, cohesion, coupling, and software design fundamentals.</p>
                <div class="topic-stats">
                    <span class="question-count">Loading...</span>
                </div>
                <div class="topic-footer">Start Quiz ‚Üí</div>
            </a>

            <a href="reliability-fault-tolerance/" class="topic-card" data-topic="reliability-fault-tolerance">
                <h2>üõ°Ô∏è Reliability & Fault Tolerance</h2>
                <p class="topic-description">Explore concepts of system reliability, fault handling, and building resilient software systems.</p>
                <div class="topic-stats">
                    <span class="question-count">Loading...</span>
                </div>
                <div class="topic-footer">Start Quiz ‚Üí</div>
            </a>

            <a href="transactions-fundamentals/" class="topic-card" data-topic="transactions-fundamentals">
                <h2>üîÑ Transactions Fundamentals</h2>
                <p class="topic-description">Learn about transaction properties, ACID principles, and ensuring data consistency in systems.</p>
                <div class="topic-stats">
                    <span class="question-count">Loading...</span>
                </div>
                <div class="topic-footer">Start Quiz ‚Üí</div>
            </a>

            <a href="atomic-actions-concurrent/" class="topic-card" data-topic="atomic-actions-concurrent">
                <h2>‚öõÔ∏è Atomic Actions & Concurrency</h2>
                <p class="topic-description">Master concepts of atomic operations, concurrent programming, and reliable multi-threaded systems.</p>
                <div class="topic-stats">
                    <span class="question-count">Loading...</span>
                </div>
                <div class="topic-footer">Start Quiz ‚Üí</div>
            </a>

            <a href="fault-model-masking/" class="topic-card" data-topic="fault-model-masking">
                <h2>üõ†Ô∏è Fault Models & Masking</h2>
                <p class="topic-description">Understand fault models, error propagation, masking techniques, and building robust systems.</p>
                <div class="topic-stats">
                    <span class="question-count">Loading...</span>
                </div>
                <div class="topic-footer">Start Quiz ‚Üí</div>
            </a>

            <a href="concurrent-programming/" class="topic-card" data-topic="concurrent-programming">
                <h2>‚öõÔ∏è Concurrent Programming</h2>
                <p class="topic-description">Master parallel execution, thread synchronization, race conditions, and designing safe concurrent systems that perform efficiently.</p>
                <div class="topic-stats">
                    <span class="question-count">Loading...</span>
                </div>
                <div class="topic-footer">Start Quiz ‚Üí</div>
            </a>

            <a href="semaphores/" class="topic-card" data-topic="semaphores">
                <h2>üö¶ Semaphores</h2>
                <p class="topic-description">Learn semaphore operations, mutual exclusion, producer-consumer problems, and coordinating access to shared resources.</p>
                <div class="topic-stats">
                    <span class="question-count">Loading...</span>
                </div>
                <div class="topic-footer">Start Quiz ‚Üí</div>
            </a>

            <a href="scheduling-real-time-systems/" class="topic-card" data-topic="scheduling-real-time-systems">
                <h2>‚è∞ Scheduling Real-time Systems</h2>
                <p class="topic-description">Explore real-time scheduling algorithms, deadline management, priority systems, and ensuring timely task execution in critical systems.</p>
                <div class="topic-stats">
                    <span class="question-count">Loading...</span>
                </div>
                <div class="topic-footer">Start Quiz ‚Üí</div>
            </a>
        </div>
    </div>

    <script>
        // Function to fetch question count for each topic
        async function updateQuestionCounts() {
            const topicCards = document.querySelectorAll('.topic-card[data-topic]');
            
            for (const card of topicCards) {
                const topic = card.getAttribute('data-topic');
                const countElement = card.querySelector('.question-count');
                
                try {
                    // Fetch the questions.json file for this topic
                    const response = await fetch(`${topic}/questions.json`);
                    
                    if (response.ok) {
                        const questions = await response.json();
                        const count = questions.length;
                        
                        // Update the count display
                        countElement.textContent = `${count} Question${count !== 1 ? 's' : ''}`;
                        
                        // Add a class based on question count
                        if (count === 0) {
                            countElement.classList.add('empty');
                        } else if (count < 5) {
                            countElement.classList.add('few');
                        } else if (count >= 20) {
                            countElement.classList.add('many');
                        }
                    } else {
                        countElement.textContent = 'No Questions';
                        countElement.classList.add('error');
                    }
                } catch (error) {
                    console.error(`Error fetching questions for ${topic}:`, error);
                    countElement.textContent = 'Error';
                    countElement.classList.add('error');
                }
            }
        }

        // Update counts when page loads
        document.addEventListener('DOMContentLoaded', updateQuestionCounts);
    </script>
</body>
</html>
